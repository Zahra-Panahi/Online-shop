<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-light fixed">
    <div class="container-fluid ">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" aria-current=" page" href="finalproject.html" target="_blank" rel="noopener noreferrer"><i class="bi bi-house"></i>   Home</a>
            </li>
              <li class="nav-item">
              <a class="nav-link" aria-current=" page" href="about.html" target="_blank" rel="noopener noreferrer"><i class="bi bi-three-dots"></i>   About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current=" page" href="login.html" target="_blank" rel="noopener noreferrer"><i class="bi bi-person"></i>   Login</a>
            </li> 
             <li class="nav-item">
              <a class="nav-link" aria-current=" page" href="contact.html" target="_blank" rel="noopener noreferrer"><i class="bi bi-person-lines-fill"></i>   Contact</a>
             </li>
             <li class="nav-item">
              <a class="nav-link" aria-current=" page" href="cart.html" target="_blank" rel="noopener noreferrer"><i class="bi bi-cart"></i>   Cart</a>
             </li>
          </ul>
        </div>
    </div>
    </nav><hr>
    <section class="hero" id="home">
    <div class="container">
      <div class="row align-items-center ">
        <div class="col-md-6 text-center text-md-start mb-4 mb-md-0 ">
          <div class="typewriter-container">
            <span id="typewriter"></span>
          </div>
        </div>
        <div class="col-md-6 text-center py-5 ">
          <img class="hero-img img-fluid rounded" src="img/png6.jpg" alt="product" >
        </div>
      </div>
    </div>
    </section>

  <button style="padding: 10px; background-color: red; border-radius: 5px;" onclick="logout()">Logout</button>

  <h1>üõçÔ∏è Shop Products</h1>
  <div id="product-container" class="product-container"></div>

  <div id="popup" class="popup ">
    <div class="popup-content ">
      <button class="close-btn add-to-cart" onclick="closePopup()">√ó</button>
      <img id="popup-img" src="" alt="product">
      <h2 id="popup-title"></h2>
      <p id="popup-desc"></p>
      <p class="price" id="popup-price"></p>
    </div>
  </div>

  <script>
     const texts =[
    "Welcome to the nice online shop.","Turn heads at every event with our stunning maxi dresses.", "Grace meets glamour, explore our executive maxi collection.", "Make your entrance unforgettable in our elegant maxi gowns.", "For every celebration, there is a maxi made just for you.", "flowing elegance, timeless beauty, discver your perfect maxi dress."
  ];
  let currentTextIndex = 0;
  let charIndex = 0;
  let isDeleting = false;
  const typingSpeed = 100;
  const deletingSpeed = 50;
  const pauseBetweenTexts = 1500;

  const typewriterElement = 
  document.getElementById("typewriter");

  function type() {
    const currentText = texts[currentTextIndex];

    if (isDeleting) {
      typewriterElement.textContent = currentText.substring(0, charIndex--);
    }else {
      typewriterElement.textContent = currentText.substring(0, charIndex++);
    }
    if (!isDeleting && charIndex === currentText.length) {
      setTimeout(()=> isDeleting = true, pauseBetweenTexts);
    } else if (isDeleting && charIndex === 0) 
    {
      isDeleting = false;
      currentTextIndex = (currentTextIndex + 1)% texts.length;
    }
    const delay = isDeleting ? deletingSpeed : typingSpeed;
    setTimeout(type, delay);
  }
  type();

    window.onload = function() {
      if (localStorage.getItem("loggedIn") !== "true") {
        window.location.href = "login.html";
      }
    };

    function logout() {
      localStorage.removeItem("loggedIn");
      window.location.href = "login.html";
    }


    const container = document.getElementById("product-container");
    const popup = document.getElementById("popup");
    const popupImg = 

document.getElementById("popup-img");
    const popupTitle = document.getElementById("popup-title");
    const popupDesc = document.getElementById("popup-desc");
    const popupPrice = document.getElementById("popup-price");

    // geting products from API
    fetch("https://fakestoreapi.com/products")
      .then(res => res.json())
      .then(data => {
        data.forEach(product => {
          const div = document.createElement("div");
          div.classList.add("product");

          div.innerHTML = `
            <img src="${product.image}" alt="${product.title}">

            <h3>${product.title.slice(0, 40)}...</h3>
            <p class="price">${product.price} $</p>
            <button class="btn" style="background-color: red;"> add to cart</button>
          `;

          //showing popup with clicking on cart without clicking button
          div.addEventListener("click", (e) => {
            if (!e.target.classList.contains("btn")) {
              showPopup(product);
            }
          });

          // adding some action for button with switching add to cart button
          const addBtn = div.querySelector(".btn");
        
          addBtn.addEventListener("click", (e) => {
            e.stopPropagation(); // preventing from opening popup when clicking on button
            addToCart(product);
          });

          container.appendChild(div);
        });
      })
      .catch(err => console.error("An error has been occured", err));

    // function of add to cart
    function addToCart(product) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      const exists = cart.find(item => item.id === product.id);

      if (exists) {
        alert("‚ö†Ô∏è This product exist in your cart.");
        return;
      }

      cart.push({
        id: product.id,
        title: product.title,
        price: product.price,
        image: product.image
      });

      localStorage.setItem("cart", JSON.stringify(cart));
      alert("‚úÖ  The product is added to your cart!");
    }

    // showing popup
    function showPopup(product) {
      popupImg.src = product.image;

      popupTitle.textContent = product.title;
      popupDesc.textContent = product.description;
      popupPrice.textContent = `Price: ${product.price} Dollar`;
      popup.style.display = "flex";
    }

    // closing popup
    function closePopup() {
      popup.style.display = "none";
    }

    // closing popup with clicking out of details
    popup.addEventListener("click", (e) => {
      if (e.target === popup) {
        closePopup();
      }
    });
  </script>
  <div class="mt-4"></div>
  <footer>
    <div class="container">
      <span class="mb-0">&copy;2025 My Online Shop. All rights reserved</span>
      <h4>Zahra Panahi</h4>
    </div>
  </footer>

</body>

</html>

